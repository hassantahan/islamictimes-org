{% extends "index.html" %}
{% block content %}

<style>
    .spacer { margin: 1rem 0; }
</style>

<div class="spacer"></div>

<!-- Map display ------------------------------------------------------------->
<section class="max-w-6xl mx-auto">
  <img id="map-output"
       class="w-full border rounded-lg shadow dark:border-gray-600"
       src="" alt="Visibility map will appear here">
</section>

<div class="spacer"></div>

<!-- Controls ---------------------------------------------------------------->
<section class="grid grid-cols-2 md:grid-cols-3 gap-4 max-w-3xl mx-auto mb-8">

  <!-- Left column ----------------------------------------------------------->
  <div class="space-y-4">
    <select id="month"  class="w-full border rounded px-3 py-2 dark:bg-gray-700 dark:border-gray-600">
      {% for m in range(1,13) %}
        <option value="{{m}}">{{["Muḥarram","Ṣaffar","Rabīʿ al-Awwal","Rabīʿ al-Thānī",
                                 "Jumādā al-Ūlā","Jumādā al-Thāniyah","Rajab","Shaʿbān",
                                 "Ramaḍān","Shawwāl","Dhū al-Qaʿdah","Dhū al-Ḥijjah"][m-1]}}</option>
      {% endfor %}
    </select>

    <select id="days"
            class="w-full border rounded px-3 py-2 dark:bg-gray-700 dark:border-gray-600">
        {% for d in [1,2,3] %}
            <option value="{{ d }}" {% if d == 3 %}selected{% endif %}>
            {{ d }} day{% if d > 1 %}s{% endif %}
            </option>
        {% endfor %}
    </select>


  </div>

  <!-- Middle column --------------------------------------------------------->
  <div class="space-y-4">
    <input id="year" type="number" min="1" max="2000" placeholder="Islamic year"
           class="w-full border rounded px-3 py-2 dark:bg-gray-700 dark:border-gray-600">

    <input id="resolution"
           type="number"
           min="50" max="500" step="50"
           value="300"
           class="w-full border rounded px-3 py-2 dark:bg-gray-700 dark:border-gray-600"
           placeholder="Resolution (50-500 in steps of 50)">
  </div>

  <!-- Right column ---------------------------------------------------------->
  <div class="space-y-4">
    <select id="criterion" class="w-full border rounded px-3 py-2 dark:bg-gray-700 dark:border-gray-600">
      <option value="1">Yallop (1997)</option>
      <option value="0">Odeh (2006)</option>
    </select>

    <button id="upcoming-month" class="w-full bg-gray-200 dark:bg-gray-700 py-2 rounded-lg">
        Upcoming Month
    </button>
  </div>
</section>

<!-- Create button ----------------------------------------------------------->
<div class="text-center mb-8">
  <button id="create-map"
          class="bg-emerald-600 text-white px-8 py-3 rounded-lg">
    Create map
  </button>
</div>


<!-- Spinner overlay --------------------------------------------------------->
<div id="map-spinner"
     class="fixed inset-0 flex items-center justify-center bg-white/70 dark:bg-black/70 hidden">
  <img src="/static/img/spinner.svg" class="w-20 h-20 animate-spin" alt="Loading…">
</div>

<script type="module" src="/static/js/visibilities.js"></script>
{% endblock %}